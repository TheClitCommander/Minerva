<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minerva UI - 2D Fallback</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100%;
            height: 100%;
            background-color: #0a0e17;
            color: #e6e6e6;
            font-family: sans-serif;
        }
        #canvas {
            position: absolute;
            top: 0;
            left: 0;
        }
        .status {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 10px;
            background: rgba(0,0,0,0.5);
            border-radius: 5px;
            font-family: monospace;
            z-index: 100;
        }
        .model-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(10, 14, 23, 0.7);
            border-radius: 10px;
            padding: 15px;
            width: 300px;
            z-index: 100;
            display: none;
        }
        .model-item {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .model-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }
        .model-name {
            font-weight: bold;
        }
        .model-score {
            background: rgba(74, 107, 223, 0.2);
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 14px;
            color: #4a6bdf;
        }
        .panel-title {
            margin-top: 0;
            color: #4a6bdf;
            border-bottom: 1px solid rgba(74, 107, 223, 0.3);
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        .progress-bar {
            height: 5px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            width: 100px;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            border-radius: 3px;
        }
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            color: #e6e6e6;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="status">Click on a model orb to see its agents</div>
    
    <!-- Think Tank Models Panel -->
    <div id="think-tank-panel" class="model-panel">
        <h3 class="panel-title">Think Tank Models</h3>
        <div class="model-item">
            <div class="model-header">
                <span class="model-name">GPT-4 Turbo</span>
                <span class="model-score">9.2</span>
            </div>
            <div class="setting-item">
                <span>Quality</span>
                <div class="progress-bar">
                    <div class="progress" style="width: 92%; background-color: #4a6bdf;"></div>
                </div>
            </div>
            <div class="setting-item">
                <span>Relevance</span>
                <div class="progress-bar">
                    <div class="progress" style="width: 95%; background-color: #28a745;"></div>
                </div>
            </div>
        </div>
        <div class="model-item">
            <div class="model-header">
                <span class="model-name">Claude 3 Opus</span>
                <span class="model-score">9.4</span>
            </div>
            <div class="setting-item">
                <span>Quality</span>
                <div class="progress-bar">
                    <div class="progress" style="width: 94%; background-color: #4a6bdf;"></div>
                </div>
            </div>
            <div class="setting-item">
                <span>Technical</span>
                <div class="progress-bar">
                    <div class="progress" style="width: 91%; background-color: #fd7e14;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Canvas setup
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const statusEl = document.querySelector('.status');
        const thinkTankPanel = document.getElementById('think-tank-panel');
        
        // Set canvas size to window size
        function setCanvasSize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        setCanvasSize();
        window.addEventListener('resize', setCanvasSize);
        
        // Models data
        const models = [
            { 
                name: "GPT-4 Turbo", 
                color: "#4a6bdf", 
                x: 0, 
                y: 0, 
                radius: 50,
                isActive: false,
                agents: [
                    { name: "Code", color: "#dc3545", radius: 15, angle: 0, speed: 0.02, orbitRadius: 80 },
                    { name: "Reasoning", color: "#28a745", radius: 15, angle: 2, speed: 0.015, orbitRadius: 100 },
                    { name: "Creative", color: "#ffc107", radius: 15, angle: 4, speed: 0.01, orbitRadius: 120 }
                ]
            },
            { 
                name: "Claude 3 Opus", 
                color: "#28a745", 
                x: 0, 
                y: 0, 
                radius: 50,
                isActive: false,
                agents: [
                    { name: "Research", color: "#fd7e14", radius: 15, angle: 0, speed: 0.02, orbitRadius: 80 },
                    { name: "Analysis", color: "#6f42c1", radius: 15, angle: 3, speed: 0.015, orbitRadius: 100 }
                ]
            },
            { 
                name: "Mistral Large", 
                color: "#6f42c1", 
                x: 0, 
                y: 0, 
                radius: 50,
                isActive: false,
                agents: [
                    { name: "Math", color: "#17a2b8", radius: 15, angle: 0, speed: 0.02, orbitRadius: 80 },
                    { name: "Code", color: "#dc3545", radius: 15, angle: 2, speed: 0.015, orbitRadius: 100 },
                    { name: "Creative", color: "#ffc107", radius: 15, angle: 4, speed: 0.01, orbitRadius: 120 }
                ]
            },
            { 
                name: "Gemini Pro", 
                color: "#fd7e14", 
                x: 0, 
                y: 0, 
                radius: 50,
                isActive: false,
                agents: [
                    { name: "Math", color: "#17a2b8", radius: 15, angle: 0, speed: 0.02, orbitRadius: 80 },
                    { name: "Instruction", color: "#20c997", radius: 15, angle: 3, speed: 0.015, orbitRadius: 100 }
                ]
            }
        ];
        
        // Minerva central orb
        const minerva = {
            name: "Minerva",
            color: "#6f42c1",
            x: 0,
            y: 0,
            radius: 70,
            pulse: 0
        };
        
        // Position models around Minerva
        function positionModels() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            // Set Minerva position to center
            minerva.x = centerX;
            minerva.y = centerY;
            
            // Position models around Minerva
            models[0].x = centerX + 250;  // GPT-4 to the right
            models[0].y = centerY - 100;
            
            models[1].x = centerX - 250;  // Claude to the left
            models[1].y = centerY + 100;
            
            models[2].x = centerX;        // Mistral above
            models[2].y = centerY - 250;
            
            models[3].x = centerX - 150;  // Gemini diagonal
            models[3].y = centerY + 200;
        }
        
        // Draw a circle with glow effect
        function drawOrb(x, y, radius, color, name = null, showPulse = false) {
            // Glow effect
            const glow = ctx.createRadialGradient(x, y, radius, x, y, radius * 1.5);
            glow.addColorStop(0, color + '50'); // Semi-transparent
            glow.addColorStop(1, 'transparent');
            
            ctx.beginPath();
            ctx.arc(x, y, radius * 1.5, 0, Math.PI * 2);
            ctx.fillStyle = glow;
            ctx.fill();
            
            // Main orb
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fillStyle = color;
            ctx.fill();
            
            // Inner highlight
            ctx.beginPath();
            ctx.arc(x - radius * 0.3, y - radius * 0.3, radius * 0.5, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.fill();
            
            // Draw name if provided
            if (name) {
                ctx.font = '14px Arial';
                ctx.fillStyle = 'white';
                ctx.textAlign = 'center';
                ctx.fillText(name, x, y + radius + 20);
            }
            
            // Additional pulse effect
            if (showPulse) {
                ctx.beginPath();
                ctx.arc(x, y, radius * (1 + minerva.pulse * 0.1), 0, Math.PI * 2);
                ctx.strokeStyle = color;
                ctx.lineWidth = 2;
                ctx.stroke();
            }
        }
        
        // Draw line between orbs
        function drawConnection(x1, y1, x2, y2, color, dash = false) {
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.strokeStyle = color + '40'; // Semi-transparent
            ctx.lineWidth = 2;
            if (dash) {
                ctx.setLineDash([5, 5]);
            } else {
                ctx.setLineDash([]);
            }
            ctx.stroke();
        }
        
        // Animation loop
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update positions if window resized
            positionModels();
            
            // Update Minerva pulse
            minerva.pulse = (Math.sin(Date.now() * 0.002) + 1) * 0.5; // Value between 0 and 1
            
            // Draw connections from Minerva to models
            models.forEach(model => {
                drawConnection(minerva.x, minerva.y, model.x, model.y, model.color);
            });
            
            // Draw Minerva
            drawOrb(minerva.x, minerva.y, minerva.radius, minerva.color, minerva.name, true);
            
            // Draw models and their agents
            models.forEach(model => {
                // Draw the model orb
                drawOrb(model.x, model.y, model.radius, model.color, model.name, model.isActive);
                
                // If model is active, draw its agents
                if (model.isActive) {
                    model.agents.forEach(agent => {
                        // Update agent position in orbit
                        agent.angle += agent.speed;
                        const agentX = model.x + Math.cos(agent.angle) * agent.orbitRadius;
                        const agentY = model.y + Math.sin(agent.angle) * agent.orbitRadius;
                        
                        // Draw connection line
                        drawConnection(model.x, model.y, agentX, agentY, agent.color, true);
                        
                        // Draw agent orb
                        drawOrb(agentX, agentY, agent.radius, agent.color, agent.name);
                    });
                }
            });
            
            requestAnimationFrame(animate);
        }
        
        // Handle clicks to toggle model activation
        function handleClick(event) {
            const x = event.clientX;
            const y = event.clientY;
            
            // Check if click is on any model
            let clickedModel = null;
            models.forEach(model => {
                const distance = Math.sqrt(Math.pow(x - model.x, 2) + Math.pow(y - model.y, 2));
                if (distance <= model.radius) {
                    clickedModel = model;
                }
            });
            
            if (clickedModel) {
                // Toggle the model's active state
                clickedModel.isActive = !clickedModel.isActive;
                statusEl.textContent = clickedModel.isActive 
                    ? `${clickedModel.name} activated - showing ${clickedModel.agents.length} agents` 
                    : `${clickedModel.name} deactivated`;
                
                // Show/hide Think Tank panel
                thinkTankPanel.style.display = clickedModel.isActive ? 'block' : 'none';
                
                // Reset other models
                models.forEach(model => {
                    if (model !== clickedModel) {
                        model.isActive = false;
                    }
                });
            }
        }
        
        // Start the application
        window.addEventListener('click', handleClick);
        positionModels();
        animate();
        
        // Log success to ensure JavaScript is running
        console.log("2D Canvas initialized successfully");
        statusEl.textContent = "2D Canvas initialized - click on a model orb";
    </script>
</body>
</html>
